---
import { NEWSLETTER_CONFIG } from "@/consts";

export interface Props {
  variant?: "default" | "compact";
}

const { variant = "default" } = Astro.props;
const isEnabled = NEWSLETTER_CONFIG.enabled && NEWSLETTER_CONFIG.formAction;
---

{isEnabled ? (
  <div class={variant === 'default' ? 'newsletter-box bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-6 my-8' : 'newsletter-compact mt-6'}>
    {variant === 'default' && (
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
        New posts and updates straight to your inbox.
      </p>
    )}

    <form
      action={NEWSLETTER_CONFIG.formAction}
      method="post"
      target="_blank"
      class="flex flex-col sm:flex-row gap-3"
    >
      {NEWSLETTER_CONFIG.tag && (
        <input type="hidden" name="tag" value={NEWSLETTER_CONFIG.tag} />
      )}
      <input
        type="email"
        name="email"
        placeholder="Your Email"
        required
        class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
      />
      <button
        type="submit"
        class="px-6 py-2 bg-accent rounded-md hover:bg-accent/90 transition-colors font-medium whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2"
        style="color: white;"
      >
        Subscribe
      </button>
    </form>

    {variant === 'default' && (
      <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">
        No spam, unsubscribe anytime.
      </p>
    )}
  </div>
) : null}

<style>
  @media (max-width: 640px) {
    .newsletter-box {
      margin-left: -1rem;
      margin-right: -1rem;
      border-radius: 0;
    }
  }
</style>
