---
phase: 16-two-way-sync
plan: 0
total_plans: 3
status: planned
last_updated: 2026-02-01T19:05:00-08:00
---

<current_state>
Phase 16 planning complete. All 3 plans created and verified. Ready to execute.

- Research done (16-RESEARCH.md)
- Plans created: 16-01, 16-02, 16-03
- Plan checker verified all plans pass
- No execution started yet
</current_state>

<completed_work>

- Research: Completed - yq patterns, backup strategies, dry-run patterns documented
- Plan 16-01: Created - Add update_obsidian_source() and get_author_from_config() to common.sh
- Plan 16-02: Created - Extend publish.sh with two-way sync + config author
- Plan 16-03: Created - Extend unpublish.sh with --dry-run and source sync
- Verification: All 3 plans passed plan checker
</completed_work>

<remaining_work>

- Execute Plan 16-01 (Wave 1): Add shared functions to common.sh
- Execute Plans 16-02 + 16-03 (Wave 2, parallel): Integrate sync into publish.sh and unpublish.sh
- Verify phase success criteria
</remaining_work>

<decisions_made>

- Use simple `.bak` file pattern (overwrites previous) instead of timestamped backups for vault hygiene
- find_obsidian_source() searches vault by slug rather than storing sourceFile in frontmatter
- get_author_from_config() returns empty (no fallback) - callers decide fallback behavior
- Model profile: quality (opus for planner/researcher, sonnet for checker)
</decisions_made>

<blockers>
None
</blockers>

<context>
This is Phase 16 of milestone v0.4.0. Phase 15 just completed (library extraction + yq integration).
The goal is bidirectional metadata sync - when you publish/unpublish, the Obsidian source file
gets updated too (draft: true/false, pubDatetime).

Wave structure:
- Wave 1: Plan 16-01 creates shared functions in common.sh
- Wave 2: Plans 16-02 and 16-03 can run in parallel (different files)

All plans are autonomous=true so they should execute without checkpoints.
</context>

<next_action>
Run: /gsd:execute-phase 16

This will execute the 3 plans across 2 waves, implementing two-way sync functionality.
</next_action>
