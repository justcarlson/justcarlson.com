---
phase: 11-content-workflow-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/blog/install/SKILL.md
  - .claude/skills/blog/publish/SKILL.md
  - .claude/skills/blog/list-posts/SKILL.md
  - .claude/skills/blog/maintain/SKILL.md
  - .claude/skills/blog/unpublish/SKILL.md
  - .claude/skills/blog/help/SKILL.md
  - .claude/settings.json
  - .claude/hooks/blog-session-start.sh
autonomous: true

must_haves:
  truths:
    - "All skills discoverable via /blog: prefix in Claude"
    - "SessionStart hook suggests /blog:install when vault not configured"
    - "SessionStart hook suggests /blog:publish when posts ready"
    - "/blog:help lists all available blog commands"
  artifacts:
    - path: ".claude/skills/blog/install/SKILL.md"
      provides: "Renamed install skill"
      contains: "name: blog:install"
    - path: ".claude/skills/blog/publish/SKILL.md"
      provides: "Renamed publish skill"
      contains: "name: blog:publish"
    - path: ".claude/skills/blog/help/SKILL.md"
      provides: "New help skill"
      contains: "Available commands"
    - path: ".claude/hooks/blog-session-start.sh"
      provides: "State-aware startup hook"
      contains: "blog:install"
    - path: ".claude/settings.json"
      provides: "Updated hook configuration"
      contains: "blog-session-start.sh"
  key_links:
    - from: ".claude/settings.json"
      to: ".claude/hooks/blog-session-start.sh"
      via: "SessionStart hook command"
      pattern: "blog-session-start"
---

<objective>
Rename all skills to use blog: prefix and enhance SessionStart hook for state detection

Purpose: Improve skill discoverability with consistent naming (like GSD's /gsd: prefix), provide smart startup suggestions
Output: All skills renamed to blog:*, new blog:help skill, smart SessionStart hook
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-content-workflow-polish/11-CONTEXT.md
@.planning/phases/11-content-workflow-polish/11-RESEARCH.md
@.claude/settings.json
@.claude/skills/publish/SKILL.md
@.claude/skills/install/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reorganize skills into blog/ subdirectory with blog: prefix</name>
  <files>.claude/skills/blog/install/SKILL.md, .claude/skills/blog/publish/SKILL.md, .claude/skills/blog/list-posts/SKILL.md, .claude/skills/blog/maintain/SKILL.md, .claude/skills/blog/unpublish/SKILL.md</files>
  <action>
Create a `blog/` subdirectory (like GSD uses `gsd/`) and move all skills into it, updating the frontmatter name field to use colon syntax:

1. Create the blog directory structure:
```bash
mkdir -p .claude/skills/blog
```

2. Move each skill and update its name field:

`install` -> `blog/install`
   - Move directory: `git mv .claude/skills/install .claude/skills/blog/install`
   - Update `name: install` to `name: blog:install`
   - Update description to: "Set up Obsidian vault path and verify dependencies"
   - Update any references to /install in content to /blog:install

`publish` -> `blog/publish`
   - Move directory: `git mv .claude/skills/publish .claude/skills/blog/publish`
   - Update `name: publish` to `name: blog:publish`
   - Update description to: "Publish blog posts from Obsidian vault with oversight"
   - Update any references to /publish in content to /blog:publish

`list-posts` -> `blog/list-posts`
   - Move directory: `git mv .claude/skills/list-posts .claude/skills/blog/list-posts`
   - Update `name: list-posts` to `name: blog:list-posts`

`maintain` -> `blog/maintain`
   - Move directory: `git mv .claude/skills/maintain .claude/skills/blog/maintain`
   - Update `name: maintain` to `name: blog:maintain`

`unpublish` -> `blog/unpublish`
   - Move directory: `git mv .claude/skills/unpublish .claude/skills/blog/unpublish`
   - Update `name: unpublish` to `name: blog:unpublish`

The colon in skill names IS valid (GSD uses this pattern: `gsd:plan-phase`, `gsd:execute-phase`, etc.)
  </action>
  <verify>
1. `ls .claude/skills/blog/` shows: install, list-posts, maintain, publish, unpublish
2. `grep "name: blog:" .claude/skills/blog/*/SKILL.md` shows all 5 skills have correct names
3. Old skill directories no longer exist at .claude/skills/ root level
  </verify>
  <done>All 5 skills moved to blog/ subdirectory with blog: prefix in name field</done>
</task>

<task type="auto">
  <name>Task 2: Create blog:help skill and smart SessionStart hook</name>
  <files>.claude/skills/blog/help/SKILL.md, .claude/hooks/blog-session-start.sh, .claude/settings.json</files>
  <action>
Part A - Create .claude/skills/blog/help/SKILL.md:
```yaml
---
name: blog:help
description: List all available blog publishing commands
disable-model-invocation: true
---

# Blog Publishing Commands

Available commands for the Obsidian-to-blog publishing workflow:

| Command | Description |
|---------|-------------|
| `/blog:install` | Set up Obsidian vault path and verify dependencies |
| `/blog:publish` | Publish posts marked as Published in Obsidian |
| `/blog:list-posts` | List posts with their validation status |
| `/blog:unpublish` | Remove a published post from the blog |
| `/blog:maintain` | Run maintenance checks on dependencies and content |
| `/blog:help` | Show this help message |

## Quick Start

1. Run `/blog:install` to configure your Obsidian vault
2. In Obsidian, set a post's status to "Published"
3. Run `/blog:publish` to publish it

## Getting Status

- Run `/blog:list-posts` to see all posts and their publication status
- Check `just list-posts` for command-line access
```

Part B - Create .claude/hooks/blog-session-start.sh:
```bash
#!/usr/bin/env bash
# SessionStart hook for blog publishing workflow
# Outputs actionable suggestion based on current state

CONFIG_FILE="$CLAUDE_PROJECT_DIR/.claude/settings.local.json"

# Check if vault is configured
if [[ ! -f "$CONFIG_FILE" ]] || ! jq -e '.obsidianVaultPath' "$CONFIG_FILE" >/dev/null 2>&1; then
    echo "Obsidian vault not configured. Run /blog:install to set up."
    exit 0
fi

# Vault configured - check for posts ready to publish
VAULT_PATH=$(jq -r '.obsidianVaultPath' "$CONFIG_FILE")
if [[ -d "$VAULT_PATH" ]]; then
    # Count posts with Published status (case-insensitive)
    POST_COUNT=$(find "$VAULT_PATH" -name "*.md" -type f -exec grep -l -i "- Published" {} \; 2>/dev/null | wc -l | tr -d ' ')
    if [[ "$POST_COUNT" -gt 0 ]]; then
        echo "Ready: $POST_COUNT post(s) with Published status. Run /blog:publish to continue."
    fi
fi

exit 0
```

Make executable: `chmod +x .claude/hooks/blog-session-start.sh`

Part C - Update .claude/settings.json:
Replace the inline SessionStart command with the new script:
```json
{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/blog-session-start.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/git-safety.sh"
          }
        ]
      }
    ]
  }
}
```
  </action>
  <verify>
1. `ls .claude/skills/blog/help/SKILL.md` exists
2. `bash .claude/hooks/blog-session-start.sh` runs without error
3. `cat .claude/settings.json | jq '.hooks.SessionStart'` shows blog-session-start.sh
  </verify>
  <done>blog:help skill created, SessionStart hook detects state and suggests action</done>
</task>

</tasks>

<verification>
1. Skill discovery:
   - `ls .claude/skills/blog/` shows: help, install, list-posts, maintain, publish, unpublish

2. Name validation:
   - `grep -h "^name:" .claude/skills/blog/*/SKILL.md | sort` shows all 6 blog:* names

3. Hook validation:
   - `.claude/hooks/blog-session-start.sh` executes and produces output
   - Output suggests /blog:install or /blog:publish based on state

4. Settings validation:
   - `jq '.hooks.SessionStart[0].hooks[0].command' .claude/settings.json` contains "blog-session-start.sh"
</verification>

<success_criteria>
- All 5 original skills moved to blog/ subdirectory with blog: prefix
- New blog:help skill lists all commands
- SessionStart hook outputs 1-line actionable suggestion
- No old skill directories remain at root level
- Requirements SKIL-01, SKIL-02 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/11-content-workflow-polish/11-02-SUMMARY.md`
</output>
