---
phase: 18-image-caption-support
plan: 02
type: execute
wave: 1
depends_on: ["18-01"]
files_modified:
  - /home/jc/notes/personal-vault/Templates/Post Template.md
  - src/content/blog/2026/hello-world.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Obsidian Post Template includes heroImageAlt and heroImageCaption fields"
    - "A test post exists with heroImage set for testing the feature"
    - "Test post renders with figure/figcaption on dev server"
  artifacts:
    - path: "/home/jc/notes/personal-vault/Templates/Post Template.md"
      provides: "Updated template with image caption fields"
      contains: "heroImageAlt:"
    - path: "src/content/blog/2026/hello-world.md"
      provides: "Test post with hero image"
      contains: "heroImage:"
  key_links:
    - from: "src/content/blog/2026/hello-world.md"
      to: "src/assets/images/"
      via: "heroImage path reference"
      pattern: "heroImage:.*forrest-gump-quote"
---

<objective>
Close UAT gaps by updating Obsidian Post Template with heroImageAlt and heroImageCaption fields, and adding a hero image to hello-world.md for testing.

Purpose: The Phase 18 code implementation is complete but cannot be tested because (1) the Obsidian template is missing the new fields, and (2) no existing post has a hero image.
Output: Updated template and test post that enables UAT verification of image caption support.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/18-image-caption-support/18-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add heroImageAlt and heroImageCaption to Obsidian Post Template</name>
  <files>/home/jc/notes/personal-vault/Templates/Post Template.md</files>
  <action>
Update the Obsidian Post Template to include the new image caption fields.

Add these two fields after the existing `heroImage:` field:
- `heroImageAlt:` (empty, for custom alt text)
- `heroImageCaption:` (empty, for optional caption)

The template currently has:
```yaml
heroImage:
categories:
```

Update to:
```yaml
heroImage:
heroImageAlt:
heroImageCaption:
categories:
```

This ensures new posts created from the template will have these fields available for authors to fill in.
  </action>
  <verify>
Read the template file and confirm it contains:
- `heroImageAlt:` field
- `heroImageCaption:` field
- Both fields appear after `heroImage:` and before `categories:`
  </verify>
  <done>Obsidian Post Template includes heroImageAlt and heroImageCaption fields for new posts</done>
</task>

<task type="auto">
  <name>Task 2: Add hero image to hello-world.md for testing</name>
  <files>src/content/blog/2026/hello-world.md</files>
  <action>
Update the hello-world.md post to include a hero image using an existing asset.

Add these fields to the frontmatter (after `tags: []`):
```yaml
heroImage: /src/assets/images/forrest-gump-quote.png
heroImageAlt: Forrest Gump quote about life being like a box of chocolates
heroImageCaption: A classic movie quote that resonates with many
```

Using `forrest-gump-quote.png` because it already exists in `src/assets/images/`.

The frontmatter should end up with:
```yaml
---
title: Hello World
pubDatetime: 2026-02-01T13:01:32.000-0500
description: Welcome to my blog
categories:
  - "[[Posts]]"
author: "Justin Carlson"
url:
created: 2026-02-01
published:
topics: []
status:
  - Published
draft: false
tags: []
heroImage: /src/assets/images/forrest-gump-quote.png
heroImageAlt: Forrest Gump quote about life being like a box of chocolates
heroImageCaption: A classic movie quote that resonates with many
---
```

Note: The heroImage path uses `/src/assets/images/` format which is the standard for referencing local assets in Astro content collections.
  </action>
  <verify>
1. Read the updated file and confirm frontmatter contains heroImage, heroImageAlt, and heroImageCaption
2. Run `npm run build` to verify the post builds without errors
3. Check the build output includes the post with the hero image
  </verify>
  <done>hello-world.md has a hero image with alt text and caption, enabling UAT testing of the image caption feature</done>
</task>

</tasks>

<verification>
After completing both tasks:
1. `npm run build` succeeds with no errors
2. Obsidian template contains the new fields
3. hello-world.md renders with figure/figcaption in dev server

Manual UAT verification:
- Start dev server: `npm run dev`
- Visit http://localhost:4321/posts/hello-world/
- Verify hero image displays with figure/figcaption wrapper
- Verify caption text appears below the image
- Verify alt text is present (inspect element or use accessibility tools)
</verification>

<success_criteria>
- Obsidian Post Template updated with heroImageAlt and heroImageCaption fields
- hello-world.md has heroImage, heroImageAlt, and heroImageCaption in frontmatter
- Build passes without errors
- Feature is testable via dev server
</success_criteria>

<output>
After completion, create `.planning/phases/18-image-caption-support/18-02-SUMMARY.md`
</output>
