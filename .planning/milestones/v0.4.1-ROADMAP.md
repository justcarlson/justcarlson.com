# Roadmap: v0.4.1 Image & Caption Support

**Created:** 2026-02-02
**Milestone:** v0.4.1
**Phases:** 2 (continues from v0.4.0 phase 17)

## Overview

| # | Phase | Goal | Requirements | Plans | Status |
|---|-------|------|--------------|-------|--------|
| 18 | Image & Caption Support | Hero images have alt text and optional captions | HERO-01, HERO-02, HERO-03, HERO-04, IMG-01 | 2 plans | Complete |
| 19 | Justfile Hero Image Support | Update justfile scripts to support heroImage, heroImageAlt, heroImageCaption | SCRIPT-01 | 3 plans | In Progress |

## Phase Details

### Phase 18: Image & Caption Support

**Goal:** Hero images render with proper alt text and optional captions; inline figcaption works correctly.

**Requirements covered:**
- HERO-01: heroImage renders with proper alt text from frontmatter
- HERO-02: heroImage supports optional caption (figcaption)
- HERO-03: Schema includes `heroImageAlt` field
- HERO-04: Schema includes `heroImageCaption` field (optional)
- IMG-01: Inline `<figure>`/`<figcaption>` renders with correct styling

**Success criteria:**
1. Post with `heroImage` and `heroImageAlt` renders image with alt attribute
2. Post with `heroImageCaption` displays caption below hero image
3. Post without caption fields still renders hero image correctly (backward compatible)
4. Inline `<figure><figcaption>` in post body renders with `prose-figcaption` styling
5. Schema validates new optional fields without breaking existing posts

**Plans:** 2 plans

Plans:
- [x] 18-01-PLAN.md — Add hero image alt text and caption support (schema + PostDetails.astro)
- [x] 18-02-PLAN.md — Close UAT gaps (Obsidian template + test post) [gap closure]

### Phase 19: Justfile Hero Image Support

**Goal:** Update justfile scripts to support heroImage, heroImageAlt, heroImageCaption fields in publishing workflow.

**Requirements covered:**
- SCRIPT-01: Justfile scripts handle hero image fields during publish/sync operations

**Success criteria:**
1. Publishing workflow preserves heroImage, heroImageAlt, heroImageCaption fields
2. Bidirectional sync handles hero image fields correctly
3. New post template includes hero image fields
4. List posts command shows hero image status

**Plans:** 3 plans

Plans:
- [x] 19-01-PLAN.md — Update publish.sh for hero image field support
- [x] 19-02-PLAN.md — Fix Perl regex bug in normalize_frontmatter() [gap closure]
- [ ] 19-03-PLAN.md — Fix wiki-link bracket handling in hero image functions [gap closure]

**Details:**
Extends existing `posts_are_identical()` and `normalize_frontmatter()` functions to handle the new hero image alt and caption fields. No changes to common.sh or other scripts needed - the existing `get_frontmatter_field()` function already handles any field name.

---

## Requirement Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| HERO-01 | 18 | Complete |
| HERO-02 | 18 | Complete |
| HERO-03 | 18 | Complete |
| HERO-04 | 18 | Complete |
| IMG-01 | 18 | Complete |
| SCRIPT-01 | 19 | In Progress |

**Coverage:** 6/6 requirements mapped (100%)

---
*Roadmap created: 2026-02-02*
*Plans created: 2026-02-02*
*Phase 18 complete: 2026-02-02*
*Phase 19 in progress: 2026-02-02*
